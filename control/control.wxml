<view class="full-screen-container">
  <view class="game-container"
      bindtouchstart="onTouchStart"
      bindtouchmove="onTouchMove"
      bindtouchend="onTouchEnd"
      bindtouchcancel="onTouchEnd">
    <!-- 添加返回按钮 -->
    <view class="back-button" bindtap="goBack">
      <text class="back-icon">←</text>
    </view>
    
    <view class="joystick-area {{joystickReady ? 'ready' : ''}}" id="joystickArea" 
          style="left: {{safeArea.left+10}}px; bottom: {{safeArea.top+30}}px;">
      <view class="joystick-base">
        <view class="joystick-stick" 
              style="transform: translate({{joystickPosition.x}}px, {{joystickPosition.y}}px);">
        </view>
      </view>
    </view>
    
    <view class="right-area">
      <view class="touch-indicator" wx:if="{{rightTouchPosition}}"
            style="left: {{rightTouchPosition.x}}px; top: {{rightTouchPosition.y}}px;">
      </view>
    </view>
    
    <!-- 调试信息显示 -->
    <view class="debug-info">
      <text>摇杆: {{joystickDebug}}</text>
      <text>旋转: {{rightRotationDebug}}</text>
    </view>
  </view>
  <view class="speed-control-container">
    <text class="speed-label">速度</text>
    <view class="speed-control">
      <view class="speed-option {{speedLevel === 'low' ? 'active' : ''}}" bindtap="setSpeedLevel" data-level="low">低</view>
      <view class="speed-option {{speedLevel === 'medium' ? 'active' : ''}}" bindtap="setSpeedLevel" data-level="medium">中</view>
      <view class="speed-option {{speedLevel === 'high' ? 'active' : ''}}" bindtap="setSpeedLevel" data-level="high">高</view>
    </view>
  </view>
</view>
